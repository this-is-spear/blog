---
title: Kotlin IN ACTION | í´ë˜ìŠ¤, ê°ì²´, ì¸í„°í˜ì´ìŠ¤ ê·¸ë¦¬ê³  ëŒë‹¤
date: '2023-11-01'
tags: ['ì±…', 'ì½”í‹€ë¦°', 'ì½”í‹€ë¦° ì¸ ì•¡ì…˜']
draft: false
summary: ì½”í‹€ë¦° ì¸ ì•¡ì…˜ 4ì¥, 5ì¥ ì½ê³  ì •ë¦¬
images: []
---

# Introduction

<TOCInline toc={props.toc} exclude="Introduction" />

# 4ì¥ : í´ë˜ìŠ¤, ê°ì²´, ì¸í„°í˜ì´ìŠ¤

## í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ ê·¸ë¦¬ê³  ìƒì†

### ì¸í„°í˜ì´ìŠ¤

ì½”í‹€ë¦°ì—ì„œ í´ë˜ìŠ¤ ê³„ì¸µì„ ì–´ë–»ê²Œ ì •ì˜í•˜ëŠ”ì§€ ì‚´í´ë³´ì.
ì¼ë°˜ì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ê±°ë‚˜ ì¸í„°í˜ì´ìŠ¤, ì¶”ìƒ í´ë˜ìŠ¤, ì•„ë‹ˆë©´ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ì„ ì–¸í•˜ê²Œ ë¼.

ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•´ ì„ ì–¸í•˜ëŠ” ëª¨ìŠµì„ ë¨¼ì € ì‚´í´ë³´ì.

```kotlin
interface Clickable {
    fun click()                         // ì¼ë°˜ ë©”ì„œë“œ ì„ ì–¸
    fun showOff() = println("Click!")   // ë””í´íŠ¸ ë©”ì„œë“œ ì„ ì–¸
}

class Button: Clickable {
    override fun click() {TODO("Not yet implemented")}
}
```

> override í‚¤ì›Œë“œ ë•ë¶„ì— ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ê±¸ ê°•ì œí•  ìˆ˜ ìˆê³ , ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ì•„ì§ ìƒì†ë°›ì§€ ëª»í–ˆìŒì„ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¸ì§€í•  ìˆ˜ ìˆì–´.

ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‘ ê°œ ì´ìƒ ìƒì†ë°›ì„ ë•Œ, ë™ì¼í•œ ë””í´íŠ¸ ë©”ì„œë“œ í•¨ìˆ˜ë¥¼ ì¶œë ¥í•˜ëŠ” ë°©ë²•ì€ ìƒìœ„ íƒ€ì…ì˜ íŒíŠ¸ë¥¼ ì œê³µí•˜ë©´ ë¼.

```kotlin
interface Clickable {
    fun click() = println("clcik!")
}

interface Focusable {
    fun click() = println("focus")
}

class Button: Clickable, Focusable {
    override fun click() = super<Clickable>.click()
}
```

ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ëŠ” ëª¨ìŠµì„ ì‚´í´ë³¼ê²Œ.
ì¸í„°í˜ì´ìŠ¤ì™€ ì°¨ì´ì ì´ ìˆë‹¤ë©´ ìƒì†í•  ë•Œ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•´ì•¼ í•œë‹¤ëŠ” ì ì´ì•¼.

```kotlin
abstract class Clickable {
   abstract fun hello()
}

class Button: Clickable(){
    override fun hello() { TODO("Not yet implemented") }
}
```

ë§ˆì§€ë§‰ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì„ ë•Œë¥¼ ì‚´í´ë³´ì.
í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê¸° ìœ„í•´ì„œëŠ” ìƒìœ„ í´ë˜ìŠ¤ì— `open` í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•´ì•¼ í•´.

```kotlin
open class Clickable {}

class Button: Clickable() {}
```

ì¸í„°í˜ì´ìŠ¤, ì¶”ìƒ í´ë˜ìŠ¤, ì¼ë°˜ í´ë˜ìŠ¤ë¥¼ ì–´ë–»ê²Œ ìƒì†í•˜ëŠ”ì§€ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë´¤ì–´.
ë‹¤ìŒ ì¥ë¶€í„°ëŠ” ìƒì†í–ˆì„ ë•Œ ì–´ë–»ê²Œ ì˜¤ë²„ë¼ì´ë“œ ë˜ëŠ”ì§€, ì–´ë–»ê²Œ ì´ˆê¸°í™”ë˜ëŠ”ì§€ ì•Œì•„ë³¼ê±°ì•¼.

### ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œ

ì½”í‹€ë¦°ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆì–´.
ë§Œì•½ ëª¨ë“  í•¨ìˆ˜ê°€ ìƒì† ê°€ëŠ¥í•œë‹¤ë©´ ì·¨ì•½í•œ ê¸°ë°˜ í´ë˜ìŠ¤(`fragile base class`) ë¬¸ì œê°€ ë°œìƒí•´ ìƒìœ„ í´ë˜ìŠ¤ì˜ ì±…ì„ì„ ê¹¨ëœ¨ë¦¬ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•´ì§€ì§€.

ê·¸ëŸ¬ë‚˜ ìƒì†ì´ ê°€ëŠ¥í•˜ë„ë¡ `open` í‚¤ì›Œë“œë¥¼ ë¶™ì¼ ìˆ˜ ìˆì–´.
ê·¸ ë°–ì—ë„ ì–´ë–¨ ë•Œ ìƒì†ì´ ê°€ëŠ¥í•´ì§€ëŠ”ì§€ ì•Œì•„ë³´ìêµ¬.

```kotlin
open class Button: Clickable {                          // ìƒì†ì´ ê°€ëŠ¥ í•˜ë„ë¡ ì—´ë¦° í´ë˜ìŠ¤
    fun disable() {TODO("Not yet implemented")}         // override ë¶ˆê°€
    open fun animate() {TODO("Not yet implemented")}    // override ê°€ëŠ¥
    override fun click() {TODO("Not yet implemented")}  // override ê°€ëŠ¥
}
```

`override`ë¡œ êµ¬í˜„í•œ ë©”ì„œë“œëŠ” í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œë„ `override`ê°€ ê°€ëŠ¥í•´.
ë§Œì•½ `override`ëœ ë©”ì„œë“œë¥¼ ìƒì† ë¶ˆê°€ëŠ¥í•˜ê²Œ ë§‰ê³  ì‹¶ë‹¤ë©´ `final` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•´.

```kotlin
open class Button: Clickable {                          // ìƒì†ì´ ê°€ëŠ¥ í•˜ë„ë¡ ì—´ë¦° í´ë˜ìŠ¤
    final override fun click() {TODO("Not yet implemented")}  // override ê°€ëŠ¥
}
```

ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë“œ ì—¬ë¶€ë¥¼ í‘œë¡œ ì •ë¦¬í•´ë´¤ì–´.

| ë³€ê²½ì            | ì˜¤ë²„ë¼ì´ë“œ ì—¬ë¶€ |
|:---------------|:---------|
| final          | â­•        |
| open           | â­•        |
| abstract       | â­•        |
| override       | â­•        |
| final override | âŒ        |

### ê°€ì‹œì„±

ê·¸ëŸ¼ ì„ ì–¸í•œ í´ë˜ìŠ¤ë‚˜ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•˜ë ¤ëŠ” ì œì–´í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³¼ê²Œ.
ì½”í‹€ë¦°ì€ í´ë˜ìŠ¤ ë©¤ë²„ë¡œ ì„ ì–¸í•˜ê±°ë‚˜ ìµœìƒìœ„ ì„ ì–¸í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆì–´.

í´ë˜ìŠ¤ ë©¤ë²„ì™€ ìµœìƒìœ„ ì„ ì–¸ ì°¨ì´ë¥¼ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê³  ê°ˆê²Œ.

```kotlin
val hello = "Hello"        // ìµœìƒìœ„ ì„ ì–¸
class Hello{               // ìµœìƒìœ„ ì„ ì–¸
    val hello = "Hello"    // í´ë˜ìŠ¤ ë©¤ë²„
}
```

ì„ ì–¸ëœ í´ë˜ìŠ¤ì™€ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½ìë¥¼ í†µí•´ ê°€ì‹œì„±ì„ ì œì–´í•  ìˆ˜ ìˆê²Œ ë¼.
ë³€ê²½ìì— ë”°ë¥¸ ê°€ì‹œì„±ì„ í‘œë¡œ ì •ë¦¬í•´ë´¤ì–´.

| ë³€ê²½ì       | í´ë˜ìŠ¤ ë©¤ë²„             | ìµœìƒìœ„ ì„ ì–¸            |
|:----------|:-------------------|:------------------|
| public    | ëª¨ë“  ê³³ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥       | ëª¨ë“  ê³³ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥      |
| internal  | ê°™ì€ ëª¨ë“ˆë§Œ ì ‘ê·¼ ê°€ëŠ¥       | ê°™ì€ ëª¨ë“ˆë§Œ ì ‘ê·¼ ê°€ëŠ¥      |
| protected | í•˜ìœ„ í´ë˜ìŠ¤ ì•ˆ ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥ | ì„ ì–¸ ë¶ˆê°€ âŒ           |
| private   | ê°™ì€ í´ë˜ìŠ¤ ì•ˆ ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥ | ê°™ì€ íŒŒì¼ ì•ˆ ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥ |

> ìë°”ì™€ ë‹¬ë¦¬ package-privateì€ ì—†ê³  ê¸°ë³¸ ê°€ì‹œì„±ì€ publicì´ë‹ˆ ì½”í‹€ë¦°ì„ ì‚¬ìš©í•  ë•Œ ì£¼ì˜ê°€ í•„ìš”í•´.

ë³€ê²½ìë¥¼ í†µí•´ ê°€ì‹œì„±ì„ ì œì–´í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì•„.

```kotlin
private val hello = "Hello"        // ê°™ì€ íŒŒì¼ ì•ˆ ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
internal class Hello{               // ê°™ì€ ëª¨ë“ˆë§Œ ì ‘ê·¼ ê°€ëŠ¥
    private val hello = "Hello"    // ê°™ì€ í´ë˜ìŠ¤ ì•ˆ ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
}
```

> private ì¸ ê²½ìš° ì„ ì–¸ëœ ìœ„ì¹˜ì— ë”°ë¼ ë‹¬ë¼ì§€ë‹ˆ ì‹ ê²½ì¨ì•¼ í•´.

### ë‚´ë¶€ í´ë˜ìŠ¤, ì¤‘ì²© í´ë˜ìŠ¤

ìë°”ì—ì„œëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ì— í´ë˜ìŠ¤(nested class)ë¥¼ ì„ ì–¸í•˜ë©´ ì™¸ë¶€ í´ë˜ìŠ¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ì½”í‹€ë¦°ì„ ë¶ˆê°€ëŠ¥ í•´.

> ìë°”ì—ì„œ ë‚´ë¶€ì— í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ë©´ inner class ë¡œ ì„ ì–¸ë˜ì§€ë§Œ ì½”í‹€ë¦°ì—ì„œëŠ” nested class ë¡œ ì„ ì–¸ ë¼.

ì½”í‹€ë¦°ì—ì„œ ì™¸ë¶€ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê°€ì§€ë ¤ë©´ `inner` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´.

```kotlin
class Outer {
    val hello = "Hello"

    inner class Inner {
        init {
            println(this@Outer.hello)
        }
    }
}
```

### ë´‰ì¸ëœ í´ë˜ìŠ¤

ë§Œì•½ ì•„ë˜ì²˜ëŸ¼ `Expr` íƒ€ì…ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤ë©´ `when` ë¶„ê¸°ë“¤ì€ `Expr`ë¥¼ ìƒì†ë°›ì•„ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ì•¼.

**AS-IS**

```kotlin
interface Expr
class Num(val value: Int): Expr
class Sum(val left: Expr, val right: Expr): Expr

fun eval(e: Expr): Int =
    when (e) {
        is Num -> e.value
        is Sum -> eval(e.right) + eval(e.left)
        else -> throw IllegalArgumentException()
    }
```

ê·¸ëŸ°ë° `Expr` ì„ ì–¸ì€ ë‘ ê°œë§Œ ë§Œë“ ë‹¤ë©´ `else` í‚¤ì›Œë“œ ì´í›„ì˜ ì‹ì´ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆì–´.
ê·¸ë˜ì„œ `seald` í‚¤ì›Œë“œë¥¼ í™œìš©í•´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•œì •ì§€ì„ ìˆ˜ ìˆì–´.

**TO-BE**

```kotlin
sealed class Expr {
    class Num(val value: Int): Expr()
    class Sum(val left: Expr, val right: Expr): Expr()
}

fun eval(e: Expr): Int =
    when (e) {
        is Expr.Num -> e.value
        is Expr.Sum -> eval(e.right) + eval(e.left)
    }
```

ìµœê·¼ì—ëŠ” sealed interface ë„ ì¶”ê°€ëìœ¼ë‹ˆ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´.

```kotlin
sealed interface Expr {
    class Num(val value: Int) : Expr
    class Sum(val left: Expr, val right: Expr) : Expr
}
```

## ìƒì„±ìì™€ í”„ë¡œí¼í‹°

### í´ë˜ìŠ¤ ì£¼ ìƒì„±ì ì´ˆê¸°í™”

í´ë˜ìŠ¤ë¥¼ ì´ˆê¸°í™” í•  ë•Œ ì£¼ ìƒì„±ìì™€ ë¶€ ìƒì„±ìë¥¼ í™œìš©í•´ ì´ˆê¸°í™” í•  ìˆ˜ ìˆì–´.

ì£¼ ìƒì„±ìëŠ” ìƒì„±ì(constructor) íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•˜ê³  ìƒì„±ì íŒŒë¼ë¯¸í„°ì— ì˜í•´ ì´ˆê¸°í™”(init)ë˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•´.
ì£¼ ìƒì„±ìë¥¼ ì •ì˜í•˜ë ¤ë©´ ë‹¤ìŒì²˜ëŸ¼ ì •ì˜í•´ì•¼ í•˜ì§€.

```kotlin
class User constructor(_nickname: String) {     // íŒŒë¼ë¯¸í„°ê°€ ìˆëŠ” ì£¼ ìƒì„±ì
    val nickname: String
    init {                                      // ì´ˆê¸°í™” ë¸”ë¡
        nickname = _nickname                    // ì´ˆê¸°í™”
    }
}
```

ì£¼ìƒì„±ìì¸ ê²½ìš° ë‹¤ìŒì²˜ëŸ¼ í”„ë¡œí¼í‹° ê°’ì„ ì‰½ê²Œ ì´ˆê¸°í™” í•  ìˆ˜ ìˆì§€.

```kotlin
class User(val nickname: String)
```

í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ì²˜ëŸ¼ ìƒì„±ì íŒŒë¼ë¯¸í„°ë„ ë””í´íŠ¸ ê°’ì„ ì •ì˜í•  ìˆ˜ ìˆì–´.

```kotlin
class User(val nickname: String, val validated: Boolean = true)

val me = User("ê±´ì°½")
val notMe = User("ê±´ì°½ì•„ë‹˜", false)
```

ê¸°ë°˜ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•œë‹¤ë©´ ê¸°ë°˜ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼ í•´.

```kotlin
open class User(val nickname: String, val validated: Boolean = true)
class ServiceUser(nickname: String) : User(nickname)
```

ë§Œì•½ ì£¼ìƒì„±ìë¥¼ ë¹„ê³µê°œí•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒì²˜ëŸ¼ ì„ ì–¸ í•  ìˆ˜ ìˆì§€.

```kotlin
class User private constructor()
```

### í´ë˜ìŠ¤ ë¶€ ìƒì„±ì ì´ˆê¸°í™”

ë¶€ìƒì„±ìëŠ” ë‹¤ìŒì²˜ëŸ¼ ì„ ì–¸ ê°€ëŠ¥í•´.

```kotlin
class User {
    constructor(nickname: String) {println("Hi, $nickname")}
    constructor(nickname: String, validate: Boolean) {println("$nickname is $validate")}
}
```

ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ê³  ì‹¶ìœ¼ë©´ `super`ë¥¼ ì‚¬ìš©í•˜ê³ , í˜„ì¬ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ ì„ ì–¸í•œë‹¤ë©´ `this`ë¥¼ ì‚¬ìš©í•˜ë©´ ë¼.

```kotlin
open class User(val nickname: String)

class RealUser : User {
    constructor(nickname: String)
        : this(nickname, true)
    constructor(nickname: String, validate: Boolean)
        : super(nickname) {
            println("$nickname is $validate")
        }
}
```

### ì¸í„°í˜ì´ìŠ¤ í”„ë¡œí¼í‹° êµ¬í˜„

ì½”í‹€ë¦°ì˜ ì¸í„°í˜ì´ìŠ¤ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆê³  ë‹¤ìŒì²˜ëŸ¼ ì´ˆê¸°í™”ê°€ ê°€ëŠ¥í•´.

```kotlin
interface User {
    val name: String
}

// 1. ì£¼ ìƒì„±ìì— í”„ë¡œí¼í‹° ì¶”ê°€
class AServiceUser(override val name: String): User

// 2. ì»¤ìŠ¤í…€ ê²Œí„° í™œìš©
class BServiceUser: User {
    override val name: String
        get() {
            TODO()
        }
}
```

### ê²Œí„°ì™€ ì„¸í„°

ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì€ ê²Œí„°ì™€ ì„¸í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¼ì´ì•¼.
ì„¸í„°ì—ì„œ ê°’ì„ ë°”ê¿€ ë–„ field í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•´.

```kotlin
class User {
    var address: String = "unspecified"
        set(value) {
            field = value
        }
}
```

í•˜ì§€ë§Œ ì„¸í„°ë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ê°’ì„ ë³€ê²½í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆì§€.
ì´ëŸ° ê²½ìš°ëŠ” ì„¸í„°ì˜ ê°€ì‹œì„±ì„ ì œí•œí•˜ë©´ í•´ê²° ë¼.

```kotlin
class User {
    var address: String = "unspecified"
        private set
}
```

## ë°ì´í„° í´ë˜ìŠ¤

### equals

ì½”í‹€ë¦°ì—ì„œ ìë°”ì™€ ë‹¤ë¥¸ ë¶€ë¶„ì´ ìˆë‹¤ë©´ `==` í‚¤ì›Œë“œì˜ ë™ì‘ì´ ë‹¤ë¥´ë‹¤ëŠ” ì ì´ì•¼.
ì½”í‹€ë¦°ì—ì„œ `==` í‚¤ì›Œë“œëŠ” `equals` ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê³  `===` í‚¤ì›Œë“œëŠ” ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ë¥¼ ë¹„êµí•´ì¤˜.

```kotlin
fun aEqualsB(a: String, b: String) = a==b    // equals ë©”ì„œë“œ ì‹¤í–‰
fun aSameB(a: String, b: String) = a===b    // ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ ì£¼ì†Œê°’ ë¹„êµ
```

### ë°ì´í„° í´ë˜ìŠ¤ì™€ equals, hashCode, toString

ìë°”ì—ì„œëŠ” ë°ì´í„°ë¡œ ì‚¬ìš©í•  í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•  ë–„ë§ˆë‹¤ `equals`, `hashCode`, `toString` ì„ êµ¬í˜„í•´ì•¼í•˜ëŠ” ë²ˆì¡í•¨ì´ ìˆì–´.
ì½”í‹€ë¦°ì€ `data` ë¼ëŠ” í‚¤ì›Œë“œë¡œ ì‰½ê²Œ í•´ê²° í•  ìˆ˜ ìˆì§€.

```kotlin
data class Client(val name: String, val postalCode: Int)
```

ë°ì´í„° í´ë˜ìŠ¤ëŠ” ìƒì„±ëœ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§€ê³  `equals`, `hashCode`, `toString`ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì¤˜.

### ë°ì´í„° í´ë˜ìŠ¤ì™€ copy

í”„ë¡œí¼í‹°ê°€ ë¶ˆë³€ì´ë©´ ì‚¬ìš©í•˜ê¸° ê¹Œë‹¤ë¡œì›Œì§€ì§€.
ê·¸ëŸ¬ë‚˜ ë©€í‹° ìŠ¤ë ˆë“œì—ì„œ í”„ë¡œí¼í‹°ê°€ ë¶ˆë³€ì´ ì•„ë‹ˆë¼ë©´ thread-safe ëª» í•  ìˆ˜ ìˆì–´.
ê·¸ë˜ì„œ ë°ì´í„° í´ë˜ìŠ¤ì—ì„œëŠ” ì¼ë¶€ ê°’ì„ ë³€ê²½í•œ ì²´ ë³µì‚¬ í•  ìˆ˜ ìˆëŠ” copy ë©”ì„œë“œë¥¼ ì œê³µí•˜ê³  ìˆì–´.

```kotlin
data class Client(val name: String, val postalCode: Int)

val client = Client("ê±´ì°½", 123)
val changedClient = client.copy(postalCode = 321)
```

### by ë¡œ ìœ„ì„

ìœ„ì„í•˜ê²Œ ë˜ë©´ ìƒìœ„ í´ë˜ì— ì˜ì¡´í•˜ê²Œ ë˜ëŠ” ì½”ë“œê°€ ì‘ì„± ë¼.
ë§Œì•½ ìƒìœ„ í´ë˜ìŠ¤ê°€ ë³€ê²½ë˜ë©´ í•˜ìœ„ì— ìˆëŠ” í´ë˜ìŠ¤ëŠ” ëŒ€ë¶€ë¶„ ê¹¨ì§€ê²Œ ë˜ì§€.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë§‰ê¸° ìœ„í•´ì„œ ë°ì½”ë ˆì´í„° íŒ¨í„´ ë“±ì„ í™œìš©í•´ ê¹¨ì§€ì§€ ì•Šë„ë¡ ìˆ˜ì •í•´ì•¼ í•´.
ê·¸ëŸ°ë° ë°ì½”ë ˆì´í„° íŒ¨í„´ì€ ì½”ë“œë¥¼ ì—„ì²­ ë§ì´ ì§œì•¼í•˜ëŠ” ë°©ë²•ì´ì•¼.

```kotlin
class DelegationCollection<T>: Collection<T> {
    private val inner = arrayListOf<T>()
    override val size: Int
    get() = TODO("Not yet implemented")
    override fun isEmpty(): Boolean {TODO("Not yet implemented")}
    override fun iterator(): Iterator<T> {TODO("Not yet implemented")}
    override fun containsAll(elements: Collection<T>): Boolean {TODO("Not yet implemented")}
    override fun contains(element: T): Boolean {TODO("Not yet implemented")}
}
```

ì½”í‹€ë¦°ì—ì„œëŠ” `by` í‚¤ì›Œë“œë¥¼ í™œìš©í•´ ì‰½ê²Œ ìœ„ì„ í•  ìˆ˜ ìˆì–´.
ê·¸ë¦¬ê³  ì›í•˜ëŠ” ë©”ì„œë“œë§Œì„ ì‰½ê²Œ ì˜¤ë²„ë¼ì´ë”©ì´ ê°€ëŠ¥í•˜ì§€.

```kotlin
class DelegationCollection<T>(inner: Collection<T> = ArrayList()): Collection<T> by inner {
    override fun contains(element: T): Boolean {TODO("Not yet implemented")}
}
```

## object í‚¤ì›Œë“œ

`object` í‚¤ì›Œë“œëŠ” ì„ ì–¸ê³¼ ë™ì‹œì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆì–´.
ë•ë¶„ì— ì‹±ê¸€í†¤ì„ ìƒì„±í•˜ê±°ë‚˜ í•„ìš”í•œ ê°ì²´ë“¤ì„ ì‰½ê²Œ ìƒì„± í•  ìˆ˜ ìˆì§€.

í‚¤ì›Œë“œë¥¼ ì„ ì–¸í•˜ëŠ” ìƒí™©ì€ ì„¸ ê°€ì§€ì•¼.

- ê°ì²´ ì„ ì–¸(object declaration) : ì‹±ê¸€í„´ì„ ì–»ê¸° ìœ„í•´
- ë™ë°˜ ê°ì²´(companion object) : íŒ©í† ë¦¬ ë©”ì„œë“œ ì„ ì–¸ì„ ìœ„í•´
- ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤(anonymous inner class) : ê°ì²´ë¥¼ ë°”ë¡œ ìƒì„±í•˜ê¸° ìœ„í•´

### ê°ì²´ ì„ ì–¸

ë™ì¼í•œ ê°ì²´ë¥¼ ì¬í™œìš©í•œë‹¤ë©´ ë‹¤ìŒì²˜ëŸ¼ ì„ ì–¸í•´ì„œ í™œìš©í•  ìˆ˜ ìˆì–´.

```kotlin
data class Person(val name: String) {
    object NameComparator: Comparator<Person> {
        override fun compare(p0: Person?, p1: Person?): Int {TODO("Not yet implemented")}
    }
}
```

### ë™ë°˜ ê°ì²´

ì½”í‹€ë¦°ì—ì„œëŠ” ì •ì  ë©”ì„œë“œë¥¼ ì œê³µí•˜ì§€ ì•Šì•„.
ê·¸ë˜ì„œ companion object í‚¤ì›Œë“œë¥¼ í™œìš©í•´ ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì•¼ í•´.

```kotlin
class User private constructor(val nickname: String) {
    companion object {
        fun newSubscriber(email: String) = User(email.substringBefore('@'))
    }
}

User.newSubscriber("ê±´ì°½@email.com")
```

> objectê°€ ë‚´ë¶€ ì •ì  í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•œë‹¤ë©´ companionì€ ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤ê³  ìƒê°í•˜ë©´ ì¢‹ì•„.

ë™ë°˜ ê°ì²´ì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì˜ í™œìš©í•´ë³´ì.

```kotlin
interface Person<T> {
    fun showName(name: String): T
}

class ServiceUser(val name: String) {
    companion object: Person<ServiceUser> {
        override fun showName(name: String): ServiceUser {TODO("Not yet implemented")}
    }
}
```

ë§Œì•½ ì™¸ë¶€ ëª¨ë“ˆì—ì„œ ë™ë°˜ ê°ì²´ë¥¼ í™•ì¥í•´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ Companion ì„ í™œìš©í•˜ë©´ ë¼.

```kotlin
class ServiceUser(val firstName: String, val lastName: String) {
    companion object
}

fun ServiceUser.Companion.newUser(name: String):ServiceUser  {
    val strings = name.split(' ')
    return ServiceUser(strings[0], strings[1])
}
```

### ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤

ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë„ object ë¡œ ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆì–´.
ë•ë¶„ì— í´ë˜ìŠ¤ ì´ë¦„ì„ ì„ ì–¸ í•  í•„ìš”ê°€ ì—†ì§€.

```kotlin
interface Clickable {
    fun click()
}

val event = object : Clickable{
    override fun click() {TODO("Not yet implemented")}
}
```

> ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ì‹±ê¸€í„´ì´ ì•„ë‹ˆë‹ˆ ì£¼ì˜í•  í•„ìš”ê°€ ìˆì–´.

ìë°”ì™€ ë‹¬ë¦¬ ì½”í‹€ë¦°ì€ ë³€ìˆ˜ë§ê³ ë„ ê°™ì€ ë¸”ë¡ì— ìˆã„´ëŠ ê°ì²´ì— ì ‘ê·¼ í•  ìˆ˜ ìˆì–´.

```kotlin
interface Clickable {
    fun click()
}

fun count() {
    var count = 0

    object : Clickable{
        override fun click() {
            count++
        }
    }
}
```

> ì´ ë¶€ë¶„ì€ ì˜¤íˆë ¤ ì¡°ì‹¬í•´ì•¼ í•  ë¶€ë¶„ ê°™ì•„. ë™ì¼í•œ ë¼ì´í”„ ì‚¬ì´í´ì´ ì•„ë‹Œë° ì ‘ê·¼í•˜ëŠ” ê±´ ìœ„í—˜í•´ë³´ì—¬.

# 5ì¥ : ëŒë‹¤ë¡œ í”„ë¡œê·¸ë˜ë°

## ëŒë‹¤ ì‹ê³¼ ë©¤ë²„ ì°¸ì¡°

### ëŒë‹¤ ì„ ì–¸

ëŒë‹¤ì‹ì„ í™œìš©í•˜ë©´ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ì„ ì–¸ì„ ë‹¤ìŒì²˜ëŸ¼ ì¤„ì¼ ìˆ˜ ìˆì–´.

**AS-IS**

```kotlin
button.click(new ClickListener( {
    override fun onClick() {
        /* ìˆ˜í–‰í•  ë™ì‘ */
    }
}))
```

**TO-BE**

```kotlin
button.click { /* ìˆ˜í–‰í•  ë™ì‘ */ }
```

ëŒë‹¤ ì„ ì–¸ì€ ë‹¤ìŒì²˜ëŸ¼ í•˜ëŠ”ê²Œ ì „ë¶€ì•¼.

```kotlin
// ì¸ìê°€ ì—†ëŠ” ê²½ìš°
service.execute { /* ìˆ˜í–‰í•  ë™ì‘ */ }
// ì¸ìê°€ í•˜ë‚˜ì¸ ê²½ìš°
service.execute { a:Int -> /* ìˆ˜í–‰í•  ë™ì‘ */ }
// ì¸ìê°€ í•˜ë‚˜ì¸ ê²½ìš°
service.execute { it.get() }
// ì¸ìê°€ ë‘ ê°œì¸ ê²½ìš°
service.execute { a: Int, b: Int -> /* ìˆ˜í–‰í•  ë™ì‘ */ }
```

ë§Œì•½ ë¸”ë¡ìœ¼ë¡œ ì‘ì„±í•˜ê²Œ ë˜ë©´ ë§ˆì§€ë§‰ ì‹ì´ ê²°ê³¼ ê°’ì´ ë  ìˆ˜ ìˆë„ë¡ êµ¬ì„± í•  ìˆ˜ë„ ìˆì§€.

```kotlin
service.execute { a: Int, b: Int ->
    /* ìˆ˜í–‰í•  ë™ì‘ */
    println("a + b is ${a + b}")
    a + b
}
```

> ëŒë‹¤ê°€ ë¹„ìš©ì´ ë§ì´ ë“¤ ê±´ì§€ ê±±ì •í•œë‹¤ë©´ ê±±ì • ì•ˆí•´ë„ ë¼.
> ëŒë‹¤ í˜¸ì¶œ í•˜ì§€ ì•ŠëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ ì„±ëŠ¥ì„ ë‚´ë‹ˆ ë„ˆë¬´ ê±±ì •í•˜ì§€ ë§ì.

### ëŒë‹¤ ì™¸ë¶€ ë³€ìˆ˜ ì ‘ê·¼

ìë°”ì™€ ë‹¬ë¦¬ ëŒë‹¤ëŠ” final í‚¤ì›Œë“œì™€ ì—°ê´€ë˜ì§€ ì•Šì€ ì™¸ë¶€ ë³€ìˆ˜ì— ì ‘ê·¼ í•  ìˆ˜ ìˆì–´.
final ì´ ì•„ë‹Œ í‚¤ì›Œë“œì— ì ‘ê·¼í•˜ê³  í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•˜ë©´ ë‹¤ë¥¸ í˜¸ì¶œìë“¤ì€ ë³€ê²½ëœ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì£¼ì˜ê°€ í•„ìš”í•´.

```kotlin
fun print(messages: Collection<String>, prefix: String){
    messages.forEach {
        print("$it $prefix")
    }
}
```

### ë©¤ë²„ ì°¸ì¡°

ë©”ì„œë“œ ì°¸ì¡°ì™€ ë‹¬ë¦¬ ì½”í‹€ë¦°ì€ ë©¤ë²„ ì°¸ì¡°ê°€ ê°€ëŠ¥ í•´.
ë©¤ë²„ ì°¸ì¡°ëŠ” í•¨ìˆ˜ë¥¼ ë„˜ê¸°ëŠ” ê¸°ëŠ¥ì´ì•¼.

```kotlin
fun hi() = println("hi!")
run(::hi)
```

ìƒì„±ì ì°¸ì¡°ë¥¼ í™œìš©í•˜ë©´ ìƒì„± ì‘ì—…ì„ ì—°ê¸° í•  ìˆ˜ë„ ìˆì–´.

```kotlin
data class Person(val name: String)
val createPerson = ::Person
val AUser = createPerson("User A")
```

í™•ì¥ í•¨ìˆ˜ë„ ë©¤ë²„ í•¨ìˆ˜ì™€ ë˜‘ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì°¸ì¡° ê°€ëŠ¥í•´.

```kotlin
fun Person.isAdult() = age > 19
val predicate = Person::isAdult
```

íŠ¹ì • ê°ì²´ë§Œ ë°”ìš´ë“œí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì„œ í™œìš© ê°€ëŠ¥ì„±ì´ ë†’ì•„.

```kotlin
data class Person(val name: String, val age: Int)
val a = Person("A", 32)

val age = Person::age
var aAge = a::age

println(age(a))
println(aAge())
```

## ì»¬ë ‰ì…˜ í•¨ìˆ˜í˜• API

### ëŒë‹¤ í™œìš©

ì½”í‹€ë¦°ì€ ì»¬ë ‰ì…˜ê³¼ ê´€ë ¨í•œ ëŒë‹¤ í•¨ìˆ˜ë¥¼ ì—„ì²­ ë§ì´ ì œê³µí•´.
ì¤‘ê´„í˜¸ë¥¼ ì‚¬ìš©í•´ ëŒë‹¤ë¡œ í™œìš©í•˜ê±°ë‚˜ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•´ ë©¤ë²„ ì°¸ì¡°ë¡œ í™œìš© í•  ìˆ˜ ìˆì–´.

```kotlin
class Person(val age: Int)

val elder = listOf(Person(23), Person(22)).maxBy { it.age }
val sameElder = listOf(Person(23), Person(22)).maxBy(Person::age)
println(elder.age) // 23
println(sameElder.age) // 23
```

ì»¬ë ‰ì…˜ì˜ `joinToString`ì²˜ëŸ¼ ì½”í‹€ë¦°ì„ ë” ìš°ì•„í•˜ê²Œ ì‚¬ìš© í•  ìˆ˜ ìˆì–´.

```kotlin
class Person(val age: Int)

val ages = listOf(Person(23), Person(22)).joinToString(separator = ", ", transform = {it.age.toString()})
val sameAges = listOf(Person(23), Person(22)).joinToString(", ") {it.age.toString()}
println(ages) // 23, 22
println(sameAges) // 23, 22
```

ê·¸ ì™¸ì—ë„ filter, mapì„ í™œìš©í•˜ë©´ ì›í•˜ëŠ” ì›ì†Œë¥¼ ë§Œë“¤ê±°ë‚˜ ì°¾ì„ ìˆ˜ ìˆì–´.
ê·¸ë¦¬ê³  groupByë¥¼ í™œìš©í•˜ë©´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§µìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆì§€.
ë§ˆì§€ë§‰ìœ¼ë¡œ flatMapê³¼ flattenì„ í™œìš©í•˜ë©´ ì¤‘ì²©ëœ ì»¬ë ‰ì…˜ì„ ë‹¨ì¼ ì»¬ë ‰ì…˜ìœ¼ë¡œ ëª¨ì„ ìˆ˜ ìˆì–´.

## ì§€ì—° ì»¬ë ‰ì…˜ ì—°ì‚°

ì—¬ëŸ¬ ì»¬ë ‰ì…˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê²°ê³¼ ì»¬ë ‰ì…˜ì„ ì¦‰ì‹œ ìƒì„±í•˜ê²Œ ë¼.
ì¦‰, ì—°ì‚°ë§ˆë‹¤ ê²°ê³¼ë¥¼ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ì— ë‹´ê²Œ ë˜ëŠ” ê±°ì§€.

ê·¸ëŸ¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ìƒì„±ë˜ë‹ˆ ì•„ê¹ì–ì•„.
ê·¸ë¦¬ê³  ë§¤ë²ˆ ì¬ì •ë ¬í•˜ëŠ” ê²½ìš°ë¼ë©´ ì˜¤ë²„í—¤ë“œê°€ ë” ì»¤ì§ˆê±°ì•¼.
ê·¸ë˜ì„œ ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì„ì‹œ ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì—°ì‡„ í•  ìˆ˜ ìˆì–´.

```kotlin
data class Greeting(val message: String)

listOf("hello", "hi", "welcome")
    .asSequence() // ì‹œí€€ìŠ¤ë¡œ ë³€í™˜
    .map { Greeting(it) }
    .filter { it.message.startsWith("w") }
    .toList() // ë§ˆì§€ë§‰ì—ë§Œ ìµœì¢… ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
```

ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒì²˜ëŸ¼ ì¦‰ì‹œ ì—°ì‚°ìœ¼ë¡œ ì „ì²´ ì»¬ë ‰ì…˜ì— ê±¸ì³ ì—°ì‚°í•˜ê²Œ ë˜ê³  ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì›ì†Œë§ˆë‹¤ ì²˜ë¦¬í•˜ê²Œ ë¼.

![ê·¸ë¦¼ 1](/static/images/kotlin-in-action-2/1.png)

> ìë°”ì—ì„œ ìŠ¤íŠ¸ë¦¼ê³¼ ë™ì¼í•œ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤ê³  ìƒê°í•˜ë©´ ë¼.

## ìë°” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ í™œìš©

ì½”í‹€ë¦¼ ëŒë‹¤ë¥¼ Runnable ê³¼ ê°™ì€ ëŒë‹¤í˜• ì¸í„°í˜ì´ìŠ¤ì— ì ìš© í•  ìˆ˜ ìˆì„ì§€ ê¶ê¸ˆí–ˆì„ê±°ì•¼.
ì½”í‹€ë¦°ì€ ìë°”ì˜ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ë•ë¶„ì´ì•¼.

ë©”ì„œë“œê°€ í•˜ë‚˜ì´ê¸° ë•Œë¬¸ì— ìœ ì¶”ê°€ ê°€ëŠ¥í•˜ì§€.

**AS-IS**

```java
void post(int delay, Runnable runnable) //...
```

```kotlin
post(1000) {println("delay 1000")}
```

## ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤

ì½”í‹€ë¦°ì—ëŠ” ìˆ˜ì‹  ê°ì²´ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šê³  ëŒë‹¤ì˜ ë³¸ë¬¸ ì•ˆì—ì„œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•´.
ì´ë¥¼ ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤(lambda with receiver)ë¼ê³  ë¶ˆëŸ¬.

### with í•¨ìˆ˜

with í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ê°ì²´ ì´ë¦„ì„ ë°˜ë³µí•´ì„œ ì„ ì–¸í•˜ì§€ ì•Šê³  í™œìš© í•  ìˆ˜ ìˆì–´.

```kotlin
fun alphabet() = with(StringBuilder()) {
        for (letter in 'A' .. 'Z') {
            append(letter)
        }
        append("\n This is Alphabet!!")
        toString()
    }
```

> ë§Œì•½ ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ì˜ toString ì„ í˜¸ì¶œí•˜ê³  ì‹¶ìœ¼ë©´ `this@OuterClass.toString()`ë¥¼ í˜¸ì¶œí•´ì„œ ì ‘ê·¼í•´ì•¼ í•´.

### apply í•¨ìˆ˜

`apply`ëŠ” ë°˜í™˜í•  ë•Œ ìˆ˜ì‹  ê°ì²´ê°€ í•„ìš”í•  ë–„ ì‚¬ìš©í•´.
`with` ë‘ ìœ ì‚¬í•˜ì§€ë§Œ ìˆ˜ì‹  ê°ì²´ë¥¼ ë°˜í™˜ í•œë‹¤ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆì–´.

```kotlin
fun alphabet() = StringBuilder().apply {
    for (letter in 'A' .. 'Z') {
        append(letter)
    }
 }.toString()
```

# í†µì°°

ğŸ› ï¸ì‘ì„±ì¤‘
