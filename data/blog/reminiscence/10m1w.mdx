---
title: 10월 1주 있었던 일 정리
date: '2023-09-29'
tags: ['회고']
draft: false
summary: draft post
images: []
---

## Introduction

<TOCInline toc={props.toc} exclude="Introduction" />

## 1. 성능 개선은 나의 숙명

### 1. 어쩌면 좋지 않은 프로세스일지도

지금 맡은 업무는 팀업 회원들의 데이터를 백업하는 일이야.
사용자마다 A, B, C 카테고리에 속한 데이터를 백업해줘야 하는데, 특정 카테고리 데이터가 방대해서 총 실행 시간이 의존하더라.

원인을 분석해보니 특정 카테고리를 분석하는 쿼리의 문제였어.
쿼리는 사용자가 속한 그룹 단위로 데이터를 조회하도록 작성되어 있어.

> ![현재 수행중인 방법](/static/images/10m1w/1.png)

사용자의 데이터를 그룹 단위로 조회할 때 많은 데이터 양으로 인해 풀 테이블 스캔이 N 번 발생하더라.
최악의 경우는 한 번의 쿼리로 인해 30초 기다리는 상황도 있었어.

> ![문제점](/static/images/10m1w/2.png)

여기에서 가장 우려되는 점은 데이터를 많이 가진 회원의 백업은 엄청 느려진다는거야.
그럼 문제 발생 확률이 높아지겠지.

> 실행이 길어지면 길어질 수록 오류 발생 확률이 높아진다는 게 나의 지론이야

문제 발생 확률을 낮추기 위해서는 실행 시간을 최소로 낮출 필요가 있었어.

> ![근거](/static/images/10m1w/3.png)

고안한 방법은 풀 테이블 스캔 횟수를 줄이는 일이었어.
각 그룹마다 조회하는 로직을 없애고 한 사용자에 대한 전체 데이터를 추출한 다음 애플리케이션에서 그루핑하는 작업을 거쳤어.

> ![해결](/static/images/10m1w/3.png)

고민을 하면서 들었던 생각은 `속도 개선은 가용 리소스 기반 트레이드 오프가 존재한다.`였어.
데이터베이스의 리소스 사용량을 최소화하고 애플리케이션의 리소스 사용량을 높이면서 자원 활용률을 높였던 게 이번 속도 개선의 핵심이었어.

> `OO% 속도 개선` 이란 결과에는 얼마나 리소스를 효율적으로 사용하는지가 중요했지

## 2. 이펙티브 소프트웨어 테스팅 책을 읽고

책 만 읽으려니 머리에 남는게 없더라구. 그래서 읽으면서 고민했던 생각을 정리해봤어!

### 1. 효율적인 소프트웨어 엔지니어는 효율적인 테스터가 되어야 해

테스팅은 정말 어려워. 이론으로 테스트 방법론을 끊임없이 학습했지만 실무에서 적용하기 어렵더라.
원인을 생각해보면 상황에 맞는 방법과 경험의 부재가 커 보였어.
그 중 테스트를 작성하면서 생각한 고민은 다음과 같아.

1. 테스트 케이스는 많은데 그 중 어떤 테스트를 작성해야 할까
2. 시스템을 운영 환경으로 옮길 때 걱정은 되지 않는가. 이런 경우 어떤 테스트가 필요할까
3. 시스템을 변경 할 때마다 깨지지 않는 테스트 스위트를 만들 수 있을까

이론과 실무 사이의 가장 좋은 절충점을 찾기 위해 `이펙티브 소프트웨어 테스팅` 책을 읽게 됐어.

